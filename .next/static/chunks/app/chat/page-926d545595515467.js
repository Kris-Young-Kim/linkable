(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{53027:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(94237);a(29769);var r=a(34680),i=a(27831),n=a(83120);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:i,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:a,size:i,className:t})),...d})}},53992:(e,t,a)=>{"use strict";a.d(t,{ChatInterface:()=>C});var s=a(94237),r=a(29769),i=a(53027),n=a(83120);function l(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a})}var o=a(80194),d=a(73390);function c(e){let{...t}=e;return(0,s.jsx)(o.bL,{"data-slot":"dialog",...t})}function u(e){let{...t}=e;return(0,s.jsx)(o.ZL,{"data-slot":"dialog-portal",...t})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function m(e){let{className:t,children:a,showCloseButton:r=!0,...i}=e;return(0,s.jsxs)(u,{"data-slot":"dialog-portal",children:[(0,s.jsx)(x,{}),(0,s.jsxs)(o.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,r&&(0,s.jsxs)(o.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(d.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(o.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)(o.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}var b=a(91045),v=a(52990);function j(e){let{open:t,onAccept:a}=e,{t:r}=(0,v.o)();return(0,s.jsx)(c,{open:t,children:(0,s.jsxs)(m,{className:"max-w-2xl","aria-describedby":"disclaimer-description",children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"flex size-12 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30",children:(0,s.jsx)(b.A,{className:"size-6 text-amber-600 dark:text-amber-500","aria-hidden":"true"})}),(0,s.jsx)(f,{className:"text-2xl",children:r("modal.disclaimer.title")})]}),(0,s.jsx)(p,{id:"disclaimer-description",className:"text-base leading-relaxed pt-4",children:r("modal.disclaimer.description")})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-border bg-muted/30 p-6 space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:r("modal.disclaimer.heading")}),(0,s.jsx)("p",{className:"text-base leading-relaxed text-foreground",children:r("modal.disclaimer.content1")}),(0,s.jsx)("p",{className:"text-base leading-relaxed text-foreground",children:r("modal.disclaimer.content2")}),(0,s.jsx)("p",{className:"text-base leading-relaxed text-foreground",children:r("modal.disclaimer.content3")})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 rounded-lg bg-blue-50 dark:bg-blue-950/30 p-4",children:[(0,s.jsx)(b.A,{className:"size-5 text-blue-600 dark:text-blue-400 mt-0.5 shrink-0","aria-hidden":"true"}),(0,s.jsx)("p",{className:"text-sm leading-relaxed text-blue-900 dark:text-blue-100",children:r("modal.disclaimer.notice")})]})]}),(0,s.jsx)(h,{children:(0,s.jsx)(i.$,{onClick:a,size:"lg",className:"w-full sm:w-auto min-w-[200px] text-base h-12","aria-label":"Accept terms and start consultation",children:r("modal.disclaimer.accept")})})]})})}var y=a(45335),N=a(28465),w=a(84210),k=a(33209),z=a(384),A=a(65037),_=a.n(A);function C(){let{t:e}=(0,v.o)(),[t,a]=(0,r.useState)(!0),[n,o]=(0,r.useState)([{id:"1",role:"assistant",content:e("chat.initialMessage"),timestamp:new Date}]),[d,c]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,b]=(0,r.useState)([]),A=(0,r.useRef)(null),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null==(e=A.current)||e.scrollIntoView({behavior:"smooth"})},[n]);let D=async()=>{let t=d.trim();if(!t)return;let a={id:crypto.randomUUID(),role:"user",content:t,timestamp:new Date};o(e=>[...e,a]),c(""),x(!0),b([]);try{var s;let a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,consultationId:h,history:n.map(e=>{let{role:t,content:a}=e;return{role:t,content:a}})})});if(!a.ok)throw Error(await a.text());let r=await a.json();!h&&r.consultationId&&f(r.consultationId),Array.isArray(r.followUpQuestions)&&b(r.followUpQuestions.filter(Boolean));let i={id:crypto.randomUUID(),role:"assistant",content:(null==(s=r.message)?void 0:s.content)||e("chat.genericReply"),timestamp:new Date};o(e=>[...e,i])}catch(t){console.error("chat_error",t),o(t=>[...t,{id:crypto.randomUUID(),role:"assistant",content:e("chat.errorResponse"),timestamp:new Date}])}finally{x(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{open:t,onAccept:()=>{var e;a(!1),null==(e=C.current)||e.focus()}}),(0,s.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,s.jsx)("header",{className:"border-b border-border bg-card",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,s.jsx)(_(),{href:"/",className:"inline-flex size-11 items-center justify-center rounded-lg hover:bg-muted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary","aria-label":e("chat.backToHome"),children:(0,s.jsx)(y.A,{className:"size-6"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex size-12 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-primary to-accent",children:(0,s.jsx)(N.A,{className:"size-6 text-white","aria-hidden":"true"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:e("chat.title")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e("chat.subtitle")})]})]})]})}),(0,s.jsx)("div",{className:"border-b border-border bg-muted/30 px-4 py-2",children:(0,s.jsx)("p",{className:"text-center text-sm text-muted-foreground max-w-3xl mx-auto",children:e("chat.disclaimer")})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[n.map(t=>(0,s.jsxs)("div",{className:"flex gap-3 ".concat("user"===t.role?"justify-end":"justify-start"),children:["assistant"===t.role&&(0,s.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-primary to-accent","aria-hidden":"true",children:(0,s.jsx)(N.A,{className:"size-5 text-white"})}),(0,s.jsx)("div",{className:"max-w-[75%] rounded-2xl px-5 py-4 text-lg leading-relaxed ".concat("user"===t.role?"bg-primary text-primary-foreground":"bg-blue-50 text-foreground dark:bg-blue-950"),role:"article","aria-label":"user"===t.role?e("chat.yourMessage"):e("chat.coordinatorMessage"),children:t.content})]},t.id)),u&&(0,s.jsxs)("div",{className:"flex gap-3",role:"status","aria-live":"polite","aria-label":e("chat.typing"),children:[(0,s.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-primary to-accent","aria-hidden":"true",children:(0,s.jsx)(N.A,{className:"size-5 text-white"})}),(0,s.jsxs)("div",{className:"max-w-[75%] rounded-2xl bg-blue-50 px-5 py-4 dark:bg-blue-950",children:[(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("span",{className:"size-2 animate-bounce rounded-full bg-muted-foreground [animation-delay:-0.3s]","aria-hidden":"true"}),(0,s.jsx)("span",{className:"size-2 animate-bounce rounded-full bg-muted-foreground [animation-delay:-0.15s]","aria-hidden":"true"}),(0,s.jsx)("span",{className:"size-2 animate-bounce rounded-full bg-muted-foreground","aria-hidden":"true"})]}),(0,s.jsx)("span",{className:"sr-only",children:e("chat.typing")})]})]}),p.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("p",{className:"w-full text-sm text-muted-foreground",children:e("chat.followUpPrompt")}),p.map(e=>(0,s.jsx)(i.$,{type:"button",variant:"secondary",size:"sm",onClick:()=>{var t;c(e),null==(t=C.current)||t.focus()},children:e},e))]}),(0,s.jsx)("div",{ref:A})]})}),(0,s.jsx)("div",{className:"border-t border-border bg-card p-4",children:(0,s.jsxs)("div",{className:"mx-auto max-w-3xl",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.$,{type:"button",size:"lg",variant:"outline",className:"size-14 shrink-0 bg-transparent",onClick:()=>{console.log("[v0] Photo attachment requested")},"aria-label":e("chat.attachPhoto"),children:(0,s.jsx)(w.A,{className:"size-6","aria-hidden":"true"})}),(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(l,{ref:C,value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:e("chat.placeholder"),className:"min-h-14 resize-none pr-32 text-lg leading-relaxed",rows:1,"aria-label":"Message input"}),(0,s.jsxs)("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[(0,s.jsx)(i.$,{type:"button",size:"lg",variant:m?"destructive":"ghost",className:"size-11",onClick:()=>{g(!m),m?console.log("[v0] Voice recording stopped"):console.log("[v0] Voice recording started")},"aria-label":m?e("chat.stopVoiceRecording"):e("chat.startVoiceRecording"),"aria-pressed":m,children:(0,s.jsx)(k.A,{className:"size-6","aria-hidden":"true"})}),(0,s.jsx)(i.$,{type:"button",size:"lg",className:"size-11",onClick:D,disabled:!d.trim()||u,"aria-label":e("chat.sendMessage"),children:(0,s.jsx)(z.A,{className:"size-5","aria-hidden":"true"})})]})]})]}),(0,s.jsx)("p",{className:"mt-3 text-center text-sm text-muted-foreground",children:e("chat.keyboardShortcuts")})]})})]})]})}},83120:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(30671),r=a(38910);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},85679:(e,t,a)=>{Promise.resolve().then(a.bind(a,53992))}},e=>{e.O(0,[0,37,803,851,990,434,303,358],()=>e(e.s=85679)),_N_E=e.O()}]);